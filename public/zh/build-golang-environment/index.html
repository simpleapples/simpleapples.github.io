<!DOCTYPE html>
<html lang="zh" dir="auto">
  <head>
    <script
      src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload"
      data-no-instant
      defer
    ></script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="robots" content="noindex, nofollow" />
    <title>Golang环境安装和依赖管理 | simpleapples</title>
    <meta name="keywords" content="" />
    <meta
      name="description"
      content="2015年，Go 1.5加入了一个试验性的vendor机制（到2016年的Go 1.6版变为默认开启），vendor机制就是在项目中加入了vendor文件夹，用于存放依赖，这样就可以将不同项目的依赖隔离开。

Golang一种静态强类型、编译型、并发型，并具有垃圾回收功能的编程语言。Golang提供了方便的安装包，支持Windows、Linux、Mac系统。
下载安装包
Golang的官网是https://golang.org/，如果官网打不开，可以访问https://golang.google.cn/这个域名。在官网点击Download Go会进入下载页，可以看到这里提供了针对各个系统的安装包，也提供了源码，可以下载源码编译安装。

下载运行安装包后，在terminal中执行go env命令，如果出现下面的输出说明已经安装成功。

GOROOT与GOPATH
仔细看上面的输出，会发现其中有一个GOPATH，又有一个GOROOT，那么到底哪个才是Golang的运行环境呢。
首先访问一下GOROOT这个路径，会发现其中包含bin、lib等文件夹。GOROOT就是Golang的安装路径，其中包含Golang编译、工具、标准库等，在安装后就会存在。
和GOROOT不同，GOPATH是工作空间路径，从go 1.8开始，如果GOPATH没有被设置，会有一个默认值，在Unix上为$HOME/go，在Windows上为%USERPROFILE%/go，当调用go build时，它会在GOPATH中寻找源码。访问一下GOPATH这个路径，会发现其中只有pkg、bin、src三个文件夹，并且里面基本是空的，这是一个约定的目录结构，src文件夹用来存放源码、pkg存放编译后生成的文件，bin存放编译后生成的可执行文件。项目代码需要在GOPATH/src路径下。
GOPATH路径下出了存放项目代码，还存放所有通过go get安装的依赖，项目代码和依赖代码是平级的，当各个项目都有很多依赖的时候，这个GOPATH路径下的代码量会多的吓人，并且难以拆分。
Vendor
当使用go run或者go build命令时，会首先从当前路径下的vendor文件夹中查找依赖，如果vendor不存在，才会从GOPATH中查找依赖。
然而我们安装依赖通常使用go get或者go install命令，这两个命令依旧会把依赖安装到GOPATH路径下。
包管理工具dep
Vendor只是go官方提供的一个机制，但是包管理的问题依然没有解决，并且也没有对依赖进行版本管理。如果要实现上述的功能，还需要借助包管理工具。
Go官方给出了包管理工具的对比：https://github.com/golang/go/wiki/PackageManagementTools
dep是官方的试验性包管理工具，可以通过如下脚本安装
curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh
安装完成后，进入项目路径，执行
dep init
项目中会出现两个文件一个目录
Gopkg.toml
Gopkg.lock
vendor
dep包管理的流程如图



solving功能，它将当前项目中的导入包和Gopkg.toml中的规则作为输入，不可变的依赖关系图作为传递完成后的输出，形成Gopkg.lock。


vendor功能，将Gopkg.lock中的信息作为输入，确保项目编译时能使用在Gopkg.lock文件中锁定的版本。


使用如下命令添加依赖
dep ensure -add [github.com/gin-gonic/gin](http://github.com/gin-gonic/gin)
使用如下命令更新Gopkg.lock
dep ensure -update
"
    />
    <meta name="author" content="" />
    <link
      rel="canonical"
      href="http://localhost:1313/zh/build-golang-environment/"
    />
    <link
      crossorigin="anonymous"
      href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css"
      integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A="
      rel="preload stylesheet"
      as="style"
    />
    <link rel="icon" href="http://localhost:1313/favicon.ico" />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="http://localhost:1313/favicon-16x16.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="http://localhost:1313/favicon-32x32.png"
    />
    <link
      rel="apple-touch-icon"
      href="http://localhost:1313/apple-touch-icon.png"
    />
    <link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg" />
    <meta name="theme-color" content="#2e2e33" />
    <meta name="msapplication-TileColor" content="#2e2e33" />
    <link
      rel="alternate"
      hreflang="zh"
      href="http://localhost:1313/zh/build-golang-environment/"
    />
    <noscript>
      <style>
        #theme-toggle,
        .top-link {
          display: none;
        }
      </style>
      <style>
        @media (prefers-color-scheme: dark) {
          :root {
            --theme: rgb(29, 30, 32);
            --entry: rgb(46, 46, 51);
            --primary: rgb(218, 218, 219);
            --secondary: rgb(155, 156, 157);
            --tertiary: rgb(65, 66, 68);
            --content: rgb(196, 196, 197);
            --code-block-bg: rgb(46, 46, 51);
            --code-bg: rgb(55, 56, 62);
            --border: rgb(51, 51, 51);
          }

          .list {
            background: var(--theme);
          }

          .list:not(.dark)::-webkit-scrollbar-track {
            background: 0 0;
          }

          .list:not(.dark)::-webkit-scrollbar-thumb {
            border-color: var(--theme);
          }
        }
      </style>
    </noscript>
  </head>

  <body class="" id="top">
    <script>
      if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add("dark");
      } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove("dark");
      } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        document.body.classList.add("dark");
      }
    </script>

    <header class="header">
      <nav class="nav">
        <div class="logo">
          <a
            href="http://localhost:1313/zh/"
            accesskey="h"
            title="simpleapples (Alt + H)"
            >simpleapples</a
          >
          <div class="logo-switches">
            <button
              id="theme-toggle"
              accesskey="t"
              title="(Alt + T)"
              aria-label="Toggle theme"
            >
              <svg
                id="moon"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"
                ></path>
              </svg>
              <svg
                id="sun"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              </svg>
            </button>
            <ul class="lang-switch">
              <li>|</li>
              <li>
                <a
                  href="http://localhost:1313/"
                  title="English"
                  aria-label="English"
                  >En</a
                >
              </li>
            </ul>
          </div>
        </div>
        <ul id="menu">
          <li>
            <a href="http://localhost:1313/zh/about/" title="about">
              <span>about</span>
            </a>
          </li>
          <li>
            <a href="http://localhost:1313/zh/categories/" title="categories">
              <span>categories</span>
            </a>
          </li>
        </ul>
      </nav>
    </header>
    <main class="main">
      <article class="post-single">
        <header class="post-header">
          <h1 class="post-title entry-hint-parent">Golang环境安装和依赖管理</h1>
          <div class="post-meta">
            <span title="2018-07-10 21:45:00 +0000 +0000">七月 10, 2018</span>
          </div>
        </header>
        <div class="post-content">
          <p>
            2015年，Go 1.5加入了一个试验性的vendor机制（到2016年的Go
            1.6版变为默认开启），vendor机制就是在项目中加入了vendor文件夹，用于存放依赖，这样就可以将不同项目的依赖隔离开。
            <img loading="lazy" src="/images/20180710_02.png" />
          </p>
          <p>
            Golang一种静态强类型、编译型、并发型，并具有垃圾回收功能的编程语言。Golang提供了方便的安装包，支持Windows、Linux、Mac系统。
          </p>
          <h1 id="下载安装包">
            下载安装包<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#下载安装包"
              >#</a
            >
          </h1>
          <p>
            Golang的官网是<a href="https://golang.org/">https://golang.org/</a
            >，如果官网打不开，可以访问<a href="https://golang.google.cn/"
              >https://golang.google.cn/</a
            >这个域名。在官网点击Download
            Go会进入下载页，可以看到这里提供了针对各个系统的安装包，也提供了源码，可以下载源码编译安装。
          </p>
          <p><img loading="lazy" src="/images/20180710_03.png" /></p>
          <p>
            下载运行安装包后，在terminal中执行go
            env命令，如果出现下面的输出说明已经安装成功。
          </p>
          <p><img loading="lazy" src="/images/20180710_04.png" /></p>
          <h1 id="goroot与gopath">
            GOROOT与GOPATH<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#goroot与gopath"
              >#</a
            >
          </h1>
          <p>
            仔细看上面的输出，会发现其中有一个GOPATH，又有一个GOROOT，那么到底哪个才是Golang的运行环境呢。
          </p>
          <p>
            首先访问一下GOROOT这个路径，会发现其中包含bin、lib等文件夹。GOROOT就是Golang的安装路径，其中包含Golang编译、工具、标准库等，在安装后就会存在。
          </p>
          <p>
            和GOROOT不同，GOPATH是工作空间路径，从go
            1.8开始，如果GOPATH没有被设置，会有一个默认值，在Unix上为$HOME/go，在Windows上为%USERPROFILE%/go，当调用go
            build时，它会在GOPATH中寻找源码。访问一下GOPATH这个路径，会发现其中只有pkg、bin、src三个文件夹，并且里面基本是空的，这是一个约定的目录结构，src文件夹用来存放源码、pkg存放编译后生成的文件，bin存放编译后生成的可执行文件。项目代码需要在GOPATH/src路径下。
          </p>
          <p>
            GOPATH路径下出了存放项目代码，还存放所有通过go
            get安装的依赖，项目代码和依赖代码是平级的，当各个项目都有很多依赖的时候，这个GOPATH路径下的代码量会多的吓人，并且难以拆分。
          </p>
          <h1 id="vendor">
            Vendor<a hidden class="anchor" aria-hidden="true" href="#vendor"
              >#</a
            >
          </h1>
          <p>
            当使用go run或者go
            build命令时，会首先从当前路径下的vendor文件夹中查找依赖，如果vendor不存在，才会从GOPATH中查找依赖。
          </p>
          <p>
            然而我们安装依赖通常使用go get或者go
            install命令，这两个命令依旧会把依赖安装到GOPATH路径下。
          </p>
          <h1 id="包管理工具dep">
            包管理工具dep<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#包管理工具dep"
              >#</a
            >
          </h1>
          <p>
            Vendor只是go官方提供的一个机制，但是包管理的问题依然没有解决，并且也没有对依赖进行版本管理。如果要实现上述的功能，还需要借助包管理工具。
          </p>
          <p>
            Go官方给出了包管理工具的对比：<a
              href="https://github.com/golang/go/wiki/PackageManagementTools"
              >https://github.com/golang/go/wiki/PackageManagementTools</a
            >
          </p>
          <p>dep是官方的试验性包管理工具，可以通过如下脚本安装</p>
          <p>
            curl
            <a
              href="https://raw.githubusercontent.com/golang/dep/master/install.sh"
              >https://raw.githubusercontent.com/golang/dep/master/install.sh</a
            >
            | sh
          </p>
          <p>安装完成后，进入项目路径，执行</p>
          <pre tabindex="0"><code>dep init
</code></pre>
          <p>项目中会出现两个文件一个目录</p>
          <pre tabindex="0"><code>Gopkg.toml
Gopkg.lock
vendor
</code></pre>
          <p>dep包管理的流程如图</p>
          <p><img loading="lazy" src="/images/20180710_05.jpg" /></p>
          <ul>
            <li>
              <p>
                solving功能，它将当前项目中的导入包和Gopkg.toml中的规则作为输入，不可变的依赖关系图作为传递完成后的输出，形成Gopkg.lock。
              </p>
            </li>
            <li>
              <p>
                vendor功能，将Gopkg.lock中的信息作为输入，确保项目编译时能使用在Gopkg.lock文件中锁定的版本。
              </p>
            </li>
          </ul>
          <p>使用如下命令添加依赖</p>
          <pre
            tabindex="0"
          ><code>dep ensure -add [github.com/gin-gonic/gin](http://github.com/gin-gonic/gin)
</code></pre>
          <p>使用如下命令更新Gopkg.lock</p>
          <pre tabindex="0"><code>dep ensure -update
</code></pre>
        </div>

        <footer class="post-footer">
          <ul class="post-tags"></ul>
        </footer>
      </article>
    </main>

    <footer class="footer">
      <span
        >&copy; 2025 <a href="http://localhost:1313/zh/">simpleapples</a></span
      >
      ·

      <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank"
          >Hugo</a
        >
        &
        <a
          href="https://github.com/adityatelange/hugo-PaperMod/"
          rel="noopener"
          target="_blank"
          >PaperMod</a
        >
      </span>
    </footer>
    <a
      href="#top"
      aria-label="go to top"
      title="Go to Top (Alt + G)"
      class="top-link"
      id="top-link"
      accesskey="g"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 12 6"
        fill="currentColor"
      >
        <path d="M12 6H0l6-6z" />
      </svg>
    </a>

    <script>
      let menu = document.getElementById("menu");
      if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
          localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        };
      }

      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          var id = this.getAttribute("href").substr(1);
          if (!window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
            document
              .querySelector(`[id='${decodeURIComponent(id)}']`)
              .scrollIntoView({
                behavior: "smooth",
              });
          } else {
            document
              .querySelector(`[id='${decodeURIComponent(id)}']`)
              .scrollIntoView();
          }
          if (id === "top") {
            history.replaceState(null, null, " ");
          } else {
            history.pushState(null, null, `#${id}`);
          }
        });
      });
    </script>
    <script>
      var mybutton = document.getElementById("top-link");
      window.onscroll = function () {
        if (
          document.body.scrollTop > 800 ||
          document.documentElement.scrollTop > 800
        ) {
          mybutton.style.visibility = "visible";
          mybutton.style.opacity = "1";
        } else {
          mybutton.style.visibility = "hidden";
          mybutton.style.opacity = "0";
        }
      };
    </script>
    <script>
      document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
          document.body.classList.remove("dark");
          localStorage.setItem("pref-theme", "light");
        } else {
          document.body.classList.add("dark");
          localStorage.setItem("pref-theme", "dark");
        }
      });
    </script>
  </body>
</html>
