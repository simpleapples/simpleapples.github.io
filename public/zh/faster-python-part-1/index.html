<!DOCTYPE html>
<html lang="zh" dir="auto">
  <head>
    <script
      src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload"
      data-no-instant
      defer
    ></script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="robots" content="noindex, nofollow" />
    <title>翻译 | 更快的Python（一） | simpleapples</title>
    <meta name="keywords" content="" />
    <meta
      name="description"
      content="
更快的Python（Python Faster Way）使用代码示例来说明如何书写Python代码能带来更高的性能。本文对代码进行了讲解，从性能和可读性等角度来选择出最适合的写法。
例子1：字符串格式化


最差/最优时间比：1.95
使用建议：Python 3.7或以上推荐使用f-string，其他版本推荐使用format方法。
说明：字符串格式化是代码中最常遇到的情况，虽然在连接少量字符串的情景中，使用&#43;号的性能最优，但是使用&#43;号的代码可读性最差。如果使用Python 3.7或优以上版本，可以使用f-string来解决这个问题，f-string的性能比format方法和%操作符的性能都要高，可读性也比&#43;号好。

例子2：字典的初始化


最差/最优时间比：1.83
使用建议：使用字面量初始化字典（以及其他集合类型）。
说明：Python中初始化集合类型时使用字面量的方式，解释器会直接调用BUILD_MAP等字节码来创建，如果用构造函数的方式来创建，则需要先查询构造方法，再执行构造方法。使用字面量初始化，Python代码也更简洁。

例子3：内置排序方法


最差/最优时间比：1.26
使用建议：根据是否需要修改原始值来决定使用哪个方法。
说明：sorted和list.sort方法是Python中内置的排序方法，sorted方法不会修改原始值，list.sort方法在原始值上直接排序，会修改原始值。比较这两个方法的性能差异，意义不大。

例子4：初始化多个变量


最差/最优时间比：1.01
使用建议：推荐使用第二种。
说明：从字节码中可以看出两种方式出了执行顺序之外，基本一致，所以性能上也非常接近。

例子5：多个变量的比较


最差/最优时间比：1.11
使用建议：推荐使用第二种。
说明：使用第一种方法能带来一定的性能提升，但是提升有限，在实际情况中也很少出现多个变量连续比较大小的情况，并且第一种方法非常不Pythonic，所以推荐使用第二种。

例子6：if true的条件判断


最差/最优时间比：1.17
使用建议：推荐使用第一种。
说明：从字节码上看，第一种方法的性能最高，并且语法上也更加简洁。

例子7：if false的条件判断


最差/最优时间比：1.10
使用建议：推荐使用第一种。
说明：从字节码上看，第一种方法的性能最高，语法角度上，if not写成第二种和第三种都是不推荐的。

例子8：判断list是否为空


最差/最优时间比：1.55
使用建议：根据具体需求，优先使用前两种。
说明：前两种代码性能更高，代码更简洁。同时，空列表a并不等于None，所以使用if a is None无法实现对空列表的判断。

例子9：判断object是否为空


最差/最优时间比：1.00
使用建议：根据具体需求，优先使用前两种。
说明：理由同上一个例子。

例子10：遍历可迭代对象


最差/最优时间比：1.12
使用建议：根据具体情况选择。
说明：两者性能差别不大，使用enumerate方法，可以不需要取对象的长度，可以直接获取到对象的index。

参考文章

Python Faster Way
"
    />
    <meta name="author" content="" />
    <link
      rel="canonical"
      href="http://localhost:1313/zh/faster-python-part-1/"
    />
    <link
      crossorigin="anonymous"
      href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css"
      integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A="
      rel="preload stylesheet"
      as="style"
    />
    <link rel="icon" href="http://localhost:1313/favicon.ico" />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="http://localhost:1313/favicon-16x16.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="http://localhost:1313/favicon-32x32.png"
    />
    <link
      rel="apple-touch-icon"
      href="http://localhost:1313/apple-touch-icon.png"
    />
    <link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg" />
    <meta name="theme-color" content="#2e2e33" />
    <meta name="msapplication-TileColor" content="#2e2e33" />
    <link
      rel="alternate"
      hreflang="zh"
      href="http://localhost:1313/zh/faster-python-part-1/"
    />
    <noscript>
      <style>
        #theme-toggle,
        .top-link {
          display: none;
        }
      </style>
      <style>
        @media (prefers-color-scheme: dark) {
          :root {
            --theme: rgb(29, 30, 32);
            --entry: rgb(46, 46, 51);
            --primary: rgb(218, 218, 219);
            --secondary: rgb(155, 156, 157);
            --tertiary: rgb(65, 66, 68);
            --content: rgb(196, 196, 197);
            --code-block-bg: rgb(46, 46, 51);
            --code-bg: rgb(55, 56, 62);
            --border: rgb(51, 51, 51);
          }

          .list {
            background: var(--theme);
          }

          .list:not(.dark)::-webkit-scrollbar-track {
            background: 0 0;
          }

          .list:not(.dark)::-webkit-scrollbar-thumb {
            border-color: var(--theme);
          }
        }
      </style>
    </noscript>
  </head>

  <body class="" id="top">
    <script>
      if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add("dark");
      } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove("dark");
      } else if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        document.body.classList.add("dark");
      }
    </script>

    <header class="header">
      <nav class="nav">
        <div class="logo">
          <a
            href="http://localhost:1313/zh/"
            accesskey="h"
            title="simpleapples (Alt + H)"
            >simpleapples</a
          >
          <div class="logo-switches">
            <button
              id="theme-toggle"
              accesskey="t"
              title="(Alt + T)"
              aria-label="Toggle theme"
            >
              <svg
                id="moon"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"
                ></path>
              </svg>
              <svg
                id="sun"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              </svg>
            </button>
            <ul class="lang-switch">
              <li>|</li>
              <li>
                <a
                  href="http://localhost:1313/"
                  title="English"
                  aria-label="English"
                  >En</a
                >
              </li>
            </ul>
          </div>
        </div>
        <ul id="menu">
          <li>
            <a href="http://localhost:1313/zh/about/" title="about">
              <span>about</span>
            </a>
          </li>
          <li>
            <a href="http://localhost:1313/zh/categories/" title="categories">
              <span>categories</span>
            </a>
          </li>
        </ul>
      </nav>
    </header>
    <main class="main">
      <article class="post-single">
        <header class="post-header">
          <h1 class="post-title entry-hint-parent">
            翻译 | 更快的Python（一）
          </h1>
          <div class="post-meta">
            <span title="2018-10-08 18:15:00 +0000 +0000">十月 8, 2018</span>
          </div>
        </header>
        <div class="post-content">
          <p><img loading="lazy" src="/images/20181008_11.png" /></p>
          <p>
            更快的Python（<a href="http://pythonfasterway.org"
              >Python Faster Way</a
            >）使用代码示例来说明如何书写Python代码能带来更高的性能。本文对代码进行了讲解，从性能和可读性等角度来选择出最适合的写法。
          </p>
          <h3 id="例子1字符串格式化">
            例子1：字符串格式化<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#例子1字符串格式化"
              >#</a
            >
          </h3>
          <p><img loading="lazy" src="/images/20181008_01.png" /></p>
          <ul>
            <li>最差/最优时间比：<strong>1.95</strong></li>
            <li>
              使用建议：Python
              3.7或以上推荐使用f-string，其他版本推荐使用format方法。
            </li>
            <li>
              说明：字符串格式化是代码中最常遇到的情况，虽然在连接少量字符串的情景中，使用+号的性能最优，但是使用+号的代码可读性最差。如果使用Python
              3.7或优以上版本，可以使用f-string来解决这个问题，f-string的性能比format方法和%操作符的性能都要高，可读性也比+号好。
            </li>
          </ul>
          <h3 id="例子2字典的初始化">
            例子2：字典的初始化<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#例子2字典的初始化"
              >#</a
            >
          </h3>
          <p><img loading="lazy" src="/images/20181008_02.png" /></p>
          <ul>
            <li>最差/最优时间比：<strong>1.83</strong></li>
            <li>使用建议：使用字面量初始化字典（以及其他集合类型）。</li>
            <li>
              说明：Python中初始化集合类型时使用字面量的方式，解释器会直接调用BUILD_MAP等字节码来创建，如果用构造函数的方式来创建，则需要先查询构造方法，再执行构造方法。使用字面量初始化，Python代码也更简洁。
            </li>
          </ul>
          <h3 id="例子3内置排序方法">
            例子3：内置排序方法<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#例子3内置排序方法"
              >#</a
            >
          </h3>
          <p><img loading="lazy" src="/images/20181008_03.png" /></p>
          <ul>
            <li>最差/最优时间比：<strong>1.26</strong></li>
            <li>使用建议：根据是否需要修改原始值来决定使用哪个方法。</li>
            <li>
              说明：sorted和list.sort方法是Python中内置的排序方法，sorted方法不会修改原始值，list.sort方法在原始值上直接排序，会修改原始值。比较这两个方法的性能差异，意义不大。
            </li>
          </ul>
          <h3 id="例子4初始化多个变量">
            例子4：初始化多个变量<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#例子4初始化多个变量"
              >#</a
            >
          </h3>
          <p><img loading="lazy" src="/images/20181008_04.png" /></p>
          <ul>
            <li>最差/最优时间比：<strong>1.01</strong></li>
            <li>使用建议：推荐使用第二种。</li>
            <li>
              说明：从字节码中可以看出两种方式出了执行顺序之外，基本一致，所以性能上也非常接近。
            </li>
          </ul>
          <h3 id="例子5多个变量的比较">
            例子5：多个变量的比较<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#例子5多个变量的比较"
              >#</a
            >
          </h3>
          <p><img loading="lazy" src="/images/20181008_05.png" /></p>
          <ul>
            <li>最差/最优时间比：<strong>1.11</strong></li>
            <li>使用建议：推荐使用第二种。</li>
            <li>
              说明：使用第一种方法能带来一定的性能提升，但是提升有限，在实际情况中也很少出现多个变量连续比较大小的情况，并且第一种方法非常不Pythonic，所以推荐使用第二种。
            </li>
          </ul>
          <h3 id="例子6if-true的条件判断">
            例子6：if true的条件判断<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#例子6if-true的条件判断"
              >#</a
            >
          </h3>
          <p><img loading="lazy" src="/images/20181008_06.png" /></p>
          <ul>
            <li>最差/最优时间比：<strong>1.17</strong></li>
            <li>使用建议：推荐使用第一种。</li>
            <li>
              说明：从字节码上看，第一种方法的性能最高，并且语法上也更加简洁。
            </li>
          </ul>
          <h3 id="例子7if-false的条件判断">
            例子7：if false的条件判断<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#例子7if-false的条件判断"
              >#</a
            >
          </h3>
          <p><img loading="lazy" src="/images/20181008_07.png" /></p>
          <ul>
            <li>最差/最优时间比：<strong>1.10</strong></li>
            <li>使用建议：推荐使用第一种。</li>
            <li>
              说明：从字节码上看，第一种方法的性能最高，语法角度上，if
              not写成第二种和第三种都是不推荐的。
            </li>
          </ul>
          <h3 id="例子8判断list是否为空">
            例子8：判断list是否为空<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#例子8判断list是否为空"
              >#</a
            >
          </h3>
          <p><img loading="lazy" src="/images/20181008_08.png" /></p>
          <ul>
            <li>最差/最优时间比：<strong>1.55</strong></li>
            <li>使用建议：根据具体需求，优先使用前两种。</li>
            <li>
              说明：前两种代码性能更高，代码更简洁。同时，空列表a并不等于None，所以使用if
              a is None无法实现对空列表的判断。
            </li>
          </ul>
          <h3 id="例子9判断object是否为空">
            例子9：判断object是否为空<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#例子9判断object是否为空"
              >#</a
            >
          </h3>
          <p><img loading="lazy" src="/images/20181008_09.png" /></p>
          <ul>
            <li>最差/最优时间比：<strong>1.00</strong></li>
            <li>使用建议：根据具体需求，优先使用前两种。</li>
            <li>说明：理由同上一个例子。</li>
          </ul>
          <h3 id="例子10遍历可迭代对象">
            例子10：遍历可迭代对象<a
              hidden
              class="anchor"
              aria-hidden="true"
              href="#例子10遍历可迭代对象"
              >#</a
            >
          </h3>
          <p><img loading="lazy" src="/images/20181008_10.png" /></p>
          <ul>
            <li>最差/最优时间比：<strong>1.12</strong></li>
            <li>使用建议：根据具体情况选择。</li>
            <li>
              说明：两者性能差别不大，使用enumerate方法，可以不需要取对象的长度，可以直接获取到对象的index。
            </li>
          </ul>
          <h3 id="参考文章">
            参考文章<a hidden class="anchor" aria-hidden="true" href="#参考文章"
              >#</a
            >
          </h3>
          <ul>
            <li><a href="http://pythonfasterway.org">Python Faster Way</a></li>
          </ul>
        </div>

        <footer class="post-footer">
          <ul class="post-tags"></ul>
        </footer>
      </article>
    </main>

    <footer class="footer">
      <span
        >&copy; 2025 <a href="http://localhost:1313/zh/">simpleapples</a></span
      >
      ·

      <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank"
          >Hugo</a
        >
        &
        <a
          href="https://github.com/adityatelange/hugo-PaperMod/"
          rel="noopener"
          target="_blank"
          >PaperMod</a
        >
      </span>
    </footer>
    <a
      href="#top"
      aria-label="go to top"
      title="Go to Top (Alt + G)"
      class="top-link"
      id="top-link"
      accesskey="g"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 12 6"
        fill="currentColor"
      >
        <path d="M12 6H0l6-6z" />
      </svg>
    </a>

    <script>
      let menu = document.getElementById("menu");
      if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
          localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        };
      }

      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          var id = this.getAttribute("href").substr(1);
          if (!window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
            document
              .querySelector(`[id='${decodeURIComponent(id)}']`)
              .scrollIntoView({
                behavior: "smooth",
              });
          } else {
            document
              .querySelector(`[id='${decodeURIComponent(id)}']`)
              .scrollIntoView();
          }
          if (id === "top") {
            history.replaceState(null, null, " ");
          } else {
            history.pushState(null, null, `#${id}`);
          }
        });
      });
    </script>
    <script>
      var mybutton = document.getElementById("top-link");
      window.onscroll = function () {
        if (
          document.body.scrollTop > 800 ||
          document.documentElement.scrollTop > 800
        ) {
          mybutton.style.visibility = "visible";
          mybutton.style.opacity = "1";
        } else {
          mybutton.style.visibility = "hidden";
          mybutton.style.opacity = "0";
        }
      };
    </script>
    <script>
      document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
          document.body.classList.remove("dark");
          localStorage.setItem("pref-theme", "light");
        } else {
          document.body.classList.add("dark");
          localStorage.setItem("pref-theme", "dark");
        }
      });
    </script>
  </body>
</html>
